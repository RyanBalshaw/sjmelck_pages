<!DOCTYPE html>


<html data-bs-theme= auto><!DOCTYPE html>
<html lang = "en">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link rel="stylesheet" href="/sjmelck_pages/css/custom-styles.css">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

        <link rel="icon" href="https://icons.getbootstrap.com/assets/icons/robot.svg" color="#000000">
        <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://icons.getbootstrap.com/assets/icons/robot.svg" color = "#000000">
        <link rel="icon" type="image/png" sizes="192x192" href="favicon-192x192.png">

        <script src="https://ryanbalshaw.github.io/sjmelck_pages/js/colour_mode_toggler.js"></script>
        <script src="https://ryanbalshaw.github.io/sjmelck_pages/js/scroll_detector.js"></script>

        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


        <title>Sjmelck Blog</title>

<meta name="description" content="This is a simple explanation of the TSA and COT." />


        <link rel="canonical" href="https://ryanbalshaw.github.io/sjmelck_pages/blog/the-tsa-and-cot-explained/" />


        <meta name="keywords" content="tag1, tag2, tag3">


        
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-TZK5KHZQ8Y', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TZK5KHZQ8Y"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-TZK5KHZQ8Y', { 'anonymize_ip': false });
}
</script>


        
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZK5KHZQ8Y"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-TZK5KHZQ8Y');
        </script>
    </head>
</html>
<body>




<header>
    

    
        
    

    
    

        
        
    

        
        
    

        
        
    

        
        
    

    <nav class="navbar navbar-expand-lg bg-navbar sticky-top">
            <div class="container ">
                <div>
                    <a class="navbar-brand" href="https://ryanbalshaw.github.io/sjmelck_pages/" accesskey = "h" title="Sjmleck">
                        <i class="bi bi-robot"></i>
                        Sjmelck
                    </a>
                </div>

                <div id="colourSwitch">
                    <span>
                        <i id="colorSwitchToggle" onclick="ToggleColor()" class="bi bi-sun"></i>
                    </span>
                </div>


                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>


                <div class="collapse navbar-collapse" id = "navbarNav">
                    <ul class="navbar-nav nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="https://ryanbalshaw.github.io/sjmelck_pages/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://ryanbalshaw.github.io/sjmelck_pages/blog/">Posts</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                About us
                            </a>
                            <ul class="dropdown-menu">
                                
                                

                                    
                                        
                                    

                                    <li>
                                    <a class="dropdown-item " href="https://ryanbalshaw.github.io/sjmelck_pages/about/ryan-balshaw">Contributor - Ryan Balshaw</a>
                                    </li>

                                    

                                

                                    
                                        
                                    

                                    <li>
                                    <a class="dropdown-item " href="https://ryanbalshaw.github.io/sjmelck_pages/about/douw-marx">Contributor - Douw Marx</a>
                                    </li>

                                    

                                

                                    
                                        
                                    

                                    <li>
                                    <a class="dropdown-item " href="https://ryanbalshaw.github.io/sjmelck_pages/about/johann-bouwer">Contributor - Johann Bouwer</a>
                                    </li>

                                    

                                

                                    
                                        
                                    

                                    <li>
                                    <a class="dropdown-item " href="https://ryanbalshaw.github.io/sjmelck_pages/about/the-origins-of-sjmelck">The Sjmelck vision</a>
                                    </li>

                                    

                                
                            </ul>
                        </li>
                    </ul>
                </div>

            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>

            </div>

        </nav>

</header>



<section>

    <div class="container mx-auto">
















        <div class="progress sticky-top"  role="progressbar" aria-label="Basic example" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          <div class="progress-bar" id="progressElement" style="width: 0%"></div>
        </div>
        <div class="row">

            <div class="container w-75">

                <h1> Time synchronous averaging and computed order tracking: Explained </h1>
                <div class="post-meta mt-3">
                    April 14, 2023 ¬∑ 8 min ¬∑ Ryan Balshaw ¬∑ 1600 Words
                </div>

                <article>
                    <p>Good day üëã</p>
<p>The purpose of this explanation is to detail a high-level overview of the time-synchronous average (TSA) and Computed Order Tracking (COT). This will require a basic understanding of the objectives of TSA and COT, and I will try to provide some explanations and intuition to help those who do not have a good grasp on the concepts. At the end of each section, I provide a step-by-step guide for implementing these methods. If you have any questions, please feel to contact me at 

<a href="mailto:ryanbalshaw81@gmail.com"
   title="ryanbalshaw81@gmail.com" 
  >
  ryanbalshaw81@gmail.com</a>
.</p>
<p>Kind regards,</p>
<p>Ryan Balshaw üßå</p>
<h2 id="introduction">Introduction</h2>
<p>The TSA and COT are two methods that are especially useful in vibration analysis. The TSA allows on to visualise the expected vibration signal from one rotation, while COT allows one to perform an order spectrum analysis on the order tracked signal to visualise the amplitude and/or the phase of the signal with respect to the shaft frequency. The TSA allows one to visualise how the vibration signal looks in one rotation and the averaging is necessary to reduce the effect of noise, which can easily interfere with any analyses we do in the time domain otherwise. COT allows us to identify signal components that are a direct function of the shaft speed, which is useful for identifying mesh frequencies or bearing faults, as these are a function of the shaft speed.</p>
<p>Now, some of you may be wondering: Why are the TSA and COT included in the same section of discussion? Aren&rsquo;t these completely different ideas? To a certain degree, yes, these techniques are quite different. However, in implementation, they share several similar elements and only differ in the latter stages of the implementation. I prefer to think of TSA as a per revolution average of a COT signal. However, we will not focus on this right now, but I will try to allude to this fact at the end of this write-up.</p>
<h2 id="time-synchronous-averaging">Time Synchronous Averaging</h2>
<p>Time synchronous averaging, conceptually, is a straightforward procedure:</p>
<ul>
<li>Determine time points/array indices of tachometer pulses to indicate when a rotation begins or ends.</li>
<li>Break a signal into \( N_r \) segments where a segment contains a shaft rotation and \( r \) indicates the rotation number, \( r = 1, 2, etc \)</li>
<li>Construct an average signal by averaging the \( N_r \) segments.</li>
</ul>
<p>Mathematically, this can be given as:</p>
<p>$$
x_{TSA}[n] = \frac{1}{N_r} \sum_{i=0}^{N_r - 1} x[n + iN_s], \text{ where } 1 \leq n \leq Ns,
$$</p>
<p>where \( N_r \) is the number of shaft rotations captured by the tachometer and \( N_s \) is the number of points per rotation segment. Note that there are two implications that are implicit here: <em>1)</em> the averaging is performed synchronous to a shaft rotation or shaft period, and <em>2)</em> the number of indices per rotation is constant for all rotations. The implication of the former is that we know, a priori, which rotation period is of interest and can extract signal segments that correspond to this period. The implication of the latter is that the shaft speed is perfectly constant, i.e. it does not change through time.</p>
<p>We can make this process tangible by testing it out. For example, consider a noisy sinusoidal signal (\( F_{sinusoid}= 1Hz \)) obtained under a sampling frequency of \( F_s = 10000 Hz \). In this example, we can assume that \( F_{sinusoid} = F_{shaft} \) for simplicity. Thus,  this implies that \( N_r = 100 \) (as it takes 1 second to complete a rotation and the signal is 100 seconds long) and \( N_s = F_s \). This signal is shown as</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/toy_signal_hu45cc0b5bc23cbdafe344e2983b48e161_58022_700x700_fit_q75_box_3.png
    " alt="Toy signal example" />
  </p>

</p>
<p>We can visualise how the TSA changes as a function of the number of averaged rotations. This is shown as</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/averaging_process_hub92aa530128bfb4901ed26bc26e521d3_165038_700x700_fit_q75_box_3.png
    " alt="Toy TSA example" />
  </p>

</p>
<p><em>However</em>, there is a problem here. If the shaft speed is varying or there is perhaps some natural speed drift or jitter, we are not guaranteed to have the same number of points in the rotation segments. This implies that \(N_s\) may not be consistent for each of the \(N_r\) segments, which is a different problem to asynchronous averaging.</p>
<p>So, what do we do? The simplest solution is to perform linear interpolation for a set number  of samples \(N_s\) for each rotation, thereby ensuring that there are a consistent number of samples for each segment that is representative of a shaft rotation. This process will ensure that we can efficiently determine the TSA of a signal.</p>
<p>Finally, the general TSA process can be given as:</p>
<ol>
<li>Obtain a tachometer signal.</li>
<li>Using the tachometer signal, determine the time-point/array indices of a tachometer pulse.</li>
<li>If the tachometer has multiple pulses per revolution, take every \(PPR^{th}\) time-point/array index to ensure that we have the time-points/array indices that correspond to a rotation.</li>
<li>For a signal between rotations \(r_i\) and \(r_{i+1}\), linearly interpolate a signal for \(N_s\) samples to ensure that each of the \(N_r\) segments have the same number of points.</li>
<li>Average the \(N_r\) segments.</li>
</ol>
<p><em>Note: You may be wondering why I keep emphasising that the tachometer pulse points are either given by time-points or an array indices.</em> The reason for this is: a tachometer is not always guaranteed to be the sampled at the signal sampling rate, thus the array indices of the pulse point may not align between the vibration signal and the tachometer signal. In this case, we need to determine the rotation start and end points using time values, which is simple, and then find the corresponding array index from the vibration signal. <em>I feel that it is important to be wary of this if you use the TSA in future.</em></p>
<h2 id="computed-order-tracking">Computed Order Tracking</h2>
<p>Computed order tracking, in implementation, requires one to do the following:</p>
<ul>
<li>Determine time points/array indices of tachometer pulses to indicate when a rotation begins or ends.</li>
<li>Resample a vibration signal between each rotation to obtain a signal that is sampled with respect to the shaft speed (or as I like to think about it \( N_s \) times per revolution). This resampling procedure ensures that we take a sample at constant angular increments.</li>
<li>Transform the signal using the DFT to obtain the order spectrum (where the sampling frequency \( F_s \) is now \( N_s \) orders) and inspect the Fourier coefficient magnitude and/or phase.</li>
</ul>
<p>In the work of Lin and Zhao [1], the following figure is given:</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/COT_process_hu31b587b3e901a4e68ad4be8aa3d11077_156786_700x700_fit_q75_box_3.png
    " alt="Lin and Zhao COT example" />
  </p>

</p>
<p>Which gives the example of a sinusoidal signal with what appears to be a linearly increasing frequency. We can think of this in a practical setting as a signal that comes from a machine with a linearly increasing shaft speed and provides an indication of when the tachometer is pulsing. It is simple enough to recreate this signal and process, so let us do exactly that. I will consider a signal with a linearly increasing frequency between \( 1Hz \) and \( 5Hz \) for a time of 10 seconds. This process gives the following figure</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/COT_signal_hu26a1c58ff0b0e22c17a5914be8f7dfbd_61798_700x700_fit_q75_box_3.png
    " alt="Chirp example" />
  </p>

</p>
<p>with the following shaft speed and angular displacement</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/COT_speeds_hubb33a76ec867da54a38182c3339617ac_36506_700x700_fit_q75_box_3.png
    " alt="angular speed and displacement" />
  </p>

</p>
<p>Now, by using the &rsquo;tachometer&rsquo; information (which we can infer from the angular displacement of the shaft), we can begin the COT process. By interpolating the segments for each rotation, the following COT signal can be developed</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/COT_resampled_signal_hue33d8665764ae40a59c73a7ca92af6ea_192836_700x700_fit_q75_box_3.png
    " alt="COT chirp example" />
  </p>

</p>
<p>Note, I also plotted the COT signal with a different time axis, one where I set \( N_s \) to \( F_s \), to show what the effect of resampling has on the signal. Finally (üòÖ), to demonstrate how the frequency spectrum and the order spectrum differ, we can look at both spectrums. This becomes</p>
<p>



  
  <p align="center">
    <img src="
    /sjmelck_pages/images/the-tsa-and-cot-explained/COT_spectrum_hubae29dd660dfa7e9d631af0b1537c991_29601_700x700_fit_q75_box_3.png
    " alt="COT example spectra" />
  </p>

</p>
<p>Here, we can see that the smearing in the frequency spectrum, and we can see a single order component in the signal at one order, which we expected as we designed to signal to vary with the shaft frequency.</p>
<p>Finally, the general COT process can be given as:</p>
<ol>
<li>Obtain a tachometer signal.</li>
<li>Using the tachometer signal, determine the time-point/array indices of a tachometer pulse.</li>
<li>If the tachometer has multiple pulses per revolution, take every \( PPR^{th} \) time-point/array index to ensure that we have the time-points/array indices that correspond to a rotation.</li>
<li>For a signal between rotations \( r_i \) and \( r_{i+1} \), linearly interpolate a signal for $N_s$ samples to ensure that each of the $N_r$ segments have the same number of points.</li>
<li>Investigate the order spectrum.</li>
</ol>
<h2 id="the-relationship-between-tsa-and-cot">The relationship between TSA and COT</h2>
<p>If one re-examines the steps for TSA and COT, it is clear that step 5 is the only general step that is different. This conceptual difference is why I stated in the beginning that they share a number of similar steps and only differ in the latter stages of the implementation. I urge you, if you are still confused, to try and re-implement these simple problems by yourself and perhaps label the steps.</p>
<p>For those of you who have reached the end of this document, I hope that you have found it useful. All the best with your exams, I hope that they go well!</p>
<p>As always, thanks for reading! üë®‚Äçüíª</p>
<h2 id="references">References</h2>
<p>[1.] Lin J, Zhao M (2015) A review and strategy for the diagnosis of speed-varying machinery. 2014 Int Conf Progn Heal Manag PHM 2014. 

<a href="https://doi.org/10.1109/ICPHM.2014.7036368"
   title="https://doi.org/10.1109/ICPHM.2014.7036368" 
   target="_blank" rel="nofollow noopener">
  https://doi.org/10.1109/ICPHM.2014.7036368</a>
</p>

                </article>

            </div>

        </div>

        <div class="row">
            <div class="col">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row g-0 align-items-center">

                    <div class="col-md-4 text-center">
                        <i class="bi bi-skip-backward-circle previousIcon"></i>
                    </div>

                    <div class="col-md-8">
                      <div class="card-body text-end">
                        <p class="card-subtitle mb-2 text-muted">Previous article</p>
                        <p class="card-text">
                            
                                <h3> The Fourier transform: Explained </h3>
                                <a class="previous stretched-link" href="https://ryanbalshaw.github.io/sjmelck_pages/blog/the-fourier-transform-explained/"></a>
                            
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
            </div>

            <div class="col">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row g-0 align-items-center">

                    <div class="col-md-8">
                      <div class="card-body text-start">
                        <p class="card-subtitle mb-2 text-muted">Next article</p>
                        <p class="card-text">
                            
                                <h3> RBF Models </h3>
                                <a class="previous stretched-link" href="https://ryanbalshaw.github.io/sjmelck_pages/blog/rbf-models/"></a>
                            
                        </p>
                      </div>
                    </div>

                    <div class="col-md-4 text-center">
                        <i class="bi bi-skip-forward-circle previousIcon"></i>
                    </div>

                  </div>
                </div>
            </div>
        </div>

    </div>

</section>



        
    </body><footer id="footer">
    <div>
    <p class="text-center">
        Copyright &copy; 2023 Sjmelck | All rights reserved.
    </p>
    </div>
</footer>
</html>
